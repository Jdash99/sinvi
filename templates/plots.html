{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% macro with_errors(field) %}
    <div class="form_field">
    {% if field.errors %}
        {% set css_class = 'has_error ' + kwargs.pop('class', '') %}
        {{ field(class=css_class, **kwargs) }}
          {% for error in field.errors %}
            <p class="errors">{{ error|e }}</p>
          {% endfor %}
        </ul>
    {% else %}
        {{ field(**kwargs) }}
    {% endif %}
    </div>
{% endmacro %}

{% block title %}Plots{% endblock %}

{% block content %}

<div class="row">
  <div class="col-md-4">
    
    <h1>Simulation</h1>
    <hr>

      <!-- Form -->
    <div id="parameters">
      <form id="parametersForm" class="form-horizontal" role="form" method="POST">
        {{ form.hidden_tag() }}

        <div class="form-group">
          {{ form.periods.label(class="col-md-3 control-label") }} 
          <div class="col-md-9">
            {{ with_errors(form.periods, class="form-control", placeholder="Set the number of periods") }}
          </div>
        </div>

        <div class='form-group'>
          {{ form.policy.label(class="col-md-3 control-label") }}
          <div class="col-md-9">
            <div class="form-group row">
              <div class="col-md-4">
                {{ form.policy(class="form-control input") }}
              </div>
              <div class='col-md-4'>
                {{ form.p1.label(class="sr-only") }} 
                {{ with_errors(form.p1, class="form-control", placeholder="Q") }}
              </div>
              <div class='col-md-4'>
                {{ form.p2.label(class="sr-only") }} 
                {{ with_errors(form.p2, class="form-control", placeholder="s") }}         
              </div>
            </div>
          </div>
        </div>

<!--         <div class="form-group">
          <div class="col-md-offset-3 col-md-4">
            {{ form.submit(class="btn btn-default") }}
          </div>
        </div> -->

        <div class="form-group">
          <div class="col-md-3">
          </div>
          <div class="col-md-4">
            {{ form.submit(class="btn btn-submit") }}
          </div>
        </div>

      </form>  <!-- form end -->
    </div> <!-- parameters div -->
  </div> <!-- col-md-5 -->

  <div class="col-md-4">
    <h1>Plot</h1>
    <hr>
    <div id="chartBox1" class="chartWindow">
      <div id="stepContainer"></div>
    </div> 
  </div>

  <div class="col-md-4">
    <h1>Statistics</h1>
    <hr>
    <div id="chartBox2" class="chartWindow">
      <div id="pieContainer"></div>
    </div> 
  </div>

</div> <!-- end row -->

{% endblock %}

{% block scripts %}
  {{super()}} 
  <script src="{{url_for('static', filename='js/step.js')}}"></script>
{% endblock %}