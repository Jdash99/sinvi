{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% macro with_errors(field) %}
    <div class="form_field">
    {% if field.errors %}
        {% set css_class = 'has_error ' + kwargs.pop('class', '') %}
        {{ field(class=css_class, **kwargs) }}
          {% for error in field.errors %}
            <p class="errors">{{ error|e }}</p>
          {% endfor %}
        </ul>
    {% else %}
        {{ field(**kwargs) }}
    {% endif %}
    </div>
{% endmacro %}

{% block title %}Plots{% endblock %}

{% block content %}

<div class="row">
  <div class="col-md-5">
    <div id="parameters" data-spy="affix" data-offset-top="60" data-offset-bottom="200">
      <h1>Inventory Simulation</h1>

      <!-- Form -->
      <form id="parametersForm" class="form-horizontal" role="form" method="POST">
        {{ form.hidden_tag() }}
        <div class="form-group">
          {{ form.periods.label(class="col-md-3 control-label") }} 
          <div class="col-md-9">
            {{ with_errors(form.periods, class="form-control", placeholder="Set the number of periods") }}
          </div>
        </div>

        <div class='form-group'>
          {{ form.policy.label(class="col-md-3 control-label") }} 
          <div class="col-md-3">            
            {{ form.policy(class="form-control") }}
          </div>
          <div class="col-md-3">
            {{ with_errors(form.p1, class="form-control", placeholder="Q") }}
          </div>
          <div class="col-md-3">
            {{ with_errors(form.p2, class="form-control", placeholder="s") }}
          </div>          
        </div>

        <div class="form-group">
          <div class="col-md-offset-3 col-md-3">
            {{ form.submit(class="btn btn-default") }}
          </div>
        </div>

      </form>  
    </div>
  </div>

  <!-- Plot -->
<!--   <div class="col-md-7">
  {% if plot %}
    <h2>Simulation Plot</h2>
    {{ plot|safe }}
    <h2>Simulation Data</h2>
    <div class="col-md-12">
      {{ data|safe }}
    </div>
  {% endif %}
  </div> -->

  <div class="col-md-7">
    <h2>Simulation Plot</h2>
    {{ plot_snippet|safe }}
    <h2>Simulation Data</h2>
    <div class="col-md-12">
      {{ table|safe }}
    </div>
  </div>
</div>

{% endblock %}